###############################################################################
# compiler setting
###############################################################################
CC      = gcc
CFLAGS  = -g -Wall -static
LIBS    = -lm -lshow -L./libshow
INCPATH = -I./libshow/inc
DIR     = $(shell pwd)

###############################################################################
# source files setting
###############################################################################
C_SOURCES = main.c
C_OBJS    = $(patsubst %.c,%.o,$(wildcard $(C_SOURCES)))
OBJS      = $(C_OBJS)
EXEC      = $(shell basename $(DIR))

###############################################################################
.PHONY : clean clean_all
###############################################################################
all: $(EXEC)

%.o:%.c
	$(CC) -c $(CFLAGS) $(INCPATH) $< -o $@

$(EXEC): $(OBJS)
	$(MAKE) -C libshow
	$(CC) $(OBJS) -o $(EXEC) $(LIBS) $(CFLAGS)

###############################################################################
clean:
	$(MAKE) -C libshow clean
	@rm -vfr $(OBJS)
clean_all: clean
	@rm -vfr $(EXEC)
###############################################################################
